<section class="deck-slide">
    <h1>Let's build a State Machine</h1>
</section>
<section>
    <section>
        <h2>From Visualization</h2>
        <p>
            <a href="https://stately.ai" target="_blank">
                <img src="img/stately_editor.png" width="80%">
            </a>
        </p>
    </section>
    <section>
        <h2>Back to Visualization from Code</h2>
        <p>
            <a href="https://stately.ai/viz/97ca81d5-6c9b-4942-a4ff-616bf4c159b2" target="_blank">Stately</a>
        </p>
    </section>
</section>
<section>
    <section>
        <h2>Testing</h2>
    </section>
    <section>
        <h2>Test whole integration<br><small>arrange</small></h2>
        <pre><code class="language-typescript" data-trim contenteditable data-noescape>
it('should transition properly through machine', () => {
  const quizService = interpret(machine);
  quizService.start();

  ...
});
        </code></pre>
    </section>
    <section>
        <h2>Test whole integration<br><small>act</small></h2>
        <pre><code class="language-typescript" data-trim contenteditable data-noescape>
quizService.send('START_QUIZ');
questions.forEach(() => {
  quizService.send('ANSWER_TRUE');
});
        </code></pre>
    </section>
    <section>
        <h2>Test whole integration<br><small>assert</small></h2>
        <pre><code class="language-typescript" data-trim contenteditable data-noescape>
expect(quizService.state.value).toEqual('results')
expect(quizService.state.context).toEqual({
    currentQuestion: 3,
    currentQuestionDisplay: 4,
    totalCorrectAnswers: 1,
    questions: expect.any(Array),
});
        </code></pre>
    </section>
    <section>
        <h2>Mock parts</h2>
        <pre><code class="language-typescript" data-trim contenteditable data-noescape>
it('should transition to results when all questions answered', () => {
    const result = machine
        .withConfig({
            guards: { allQuestionsAnswered: () => true },
        })
        .transition('quiz', 'ANSWER_FALSE');

    expect(result.value).toEqual('results');
});
        </code></pre>
    </section>
</section>

